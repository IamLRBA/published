---
layout: post
title:  Xtext 2.16.0 Release Notes
date:   2018-12-04
categories: releasenotes
published: false
---

This release focusses on stability, performance and the integration in Eclipse 2018-12.

## Java 11 Preparation

Java 11 has been released in September and [Xtext is in preparation](https://github.com/eclipse/xtext/issues/1182) for full support. There are many components Xtext relies on which need to work with Java 11, and not all could be integrated so far, or are not available themselves yet. Thus we schedule Java 11 support for release 2.17. However, some preparational work has already been included into Xtext 2.16:

* ASM 7: The ASM bytecode analysis and manipulation framework has been upgraded to the latest version 7.0.
* Tycho 1.3: Tycho 1.3 is built against latest JDT, which is required to use Java 11. All projects and wizards have been upgraded to Tycho 1.3.
* Gradle: Xtext 2.16 builds against and uses Gradle 4.10.2 now.
* xtext-maven-plugin: The plugin has been updated to support the Java 11 source level.

## Testing

### Quickfix testing API

A new base class [`AbstractQuickfixTest`](https://github.com/eclipse/xtext-eclipse/blob/master/org.eclipse.xtext.ui.tests/tests/org/eclipse/xtext/ui/tests/editor/quickfix/AbstractQuickfixTest.java) allows the definition of test cases for quickfixes. Quickfixes can be tested by using the method 

```
public void testQuickfixesOn(CharSequence it, String issueCode, Quickfix... quickfixes)
```

This method takes a DSL text as first argument. The second argument is the issue code of the issue that can be fixed by quickfixes. Finally the third argument is an array of `Quickfix` testing instances, which defines a tuple of a label, the quickfix description and the expected resulting DSL text after appliance.

```
	@Data
	protected static class Quickfix {
		String label
		String description
		String result
	}
```

The Xtext example projects Domainmodel, Statemachine and Home Automation are extended by such tests to demonstrate its usage. For example, the Domainmodel Example's quickfix test looks like this:

```
class QuickfixTest extends AbstractQuickfixTest {

	@Before def void setup() {
		/*
		 * Xbase-based languages require java project
		 */
		projectName.createJavaProject
	}

	@Test def fix_invalid_entity_name() {
		'''
			entity blog {
			}
		'''.testQuickfixesOn(INVALID_TYPE_NAME, new Quickfix("Capitalize name", "Capitalize name  of 'blog'", '''
			entity Blog {
			}
		'''))
	}
	
	@Test def fix_invalid_property_name() {
		'''
			entity Blog {
				Title : String
			}
		'''.testQuickfixesOn(INVALID_FEATURE_NAME, new Quickfix("Uncapitalize name", "Uncapitalize name of 'Title'", '''
			entity Blog {
				title : String
			
			}
		'''))
	}

	@Test def fix_invalid_operation_name() {
		'''
			entity Blog {
				title : String
				op SetTitle(String title) {}
			}
		'''.testQuickfixesOn(INVALID_FEATURE_NAME, new Quickfix("Uncapitalize name", "Uncapitalize name of 'SetTitle'", '''
			entity Blog {
				title : String
				op setTitle(String title) {}
			
			}
		'''))
	}
}}
```


# Language Server Support

## Upgrade to Eclipse LSP4J 0.6.0

Xtext now integrates Eclipse LSP4J version 0.6.0. 

## Configurable Server Exit Behavior

The default behavior on receiving the `exit` command of Xtext language servers was to call `System.exit` and thus terminate the JVM. While this is desirable when a host process is shut down (like termination of the editing tool) it harms [scenarios](https://github.com/eclipse/xtext-core/issues/885) where the language server and client run on the same JVM. 

To support both, the `exit` command is now delegated to an instance of the introduced interface `ILanguageServerShutdownAndExitHandler`. Its default implementation `ILanguageServerShutdownAndExitHandler.DefaultImpl` still calls `System.exit()`. For embedded scenarios the interface should be bound to `ILanguageServerShutdownAndExitHandler.NullImpl` instead, which ignores the exit request and keeps the JVM alive.

# Minimal Target Platform

The Eclipse Platform has changed the release cadence after its Photon release (4.9) to a quartely release cycle. This increases the speed of changes to the platform that Xtext relies on and makes it hard for projects like Xtext that deeply integrate with the platform to support a wide range of relases. Therefore it was decided to cut off the supported Eclipse releases and require Eclipse 4.7.3a (Oxygen.3a, latest Oxygen release) at least.

This has now been enforced by constraining the lower bound of all bundles of the Eclipse Platform. As a consequence, Xtext 2.16 will not be possible to install on an earlier Eclipse release.

## Deprecation of GWT
We will no longer maintain the GWT versions of Xbase and Xtend Lib. The corresponding jars will be no longer published with future versions of Xtext (likely from 2.17 on).

## Outlook for 2.17
Java 11 Support, a Maven BOM and a new MWE version are planned for 2.17

## Fixed Issues

As in every release cycle we were eagerly hunting down bugs, and reviewed and integrated plenty of contributions. More than a 100 issues and almost 300 pull requests have made it into this release. For further details please refer to the following lists:

- [Fixed GitHub issues](https://github.com/search?utf8=%E2%9C%93&q=is%3Aissue+milestone%3ARelease_2.16+is%3Aclosed+repo%3Aeclipse%2Fxtext+repo%3Aeclipse%2Fxtext-core+repo%3Aeclipse%2Fxtext-lib+repo%3Aeclipse%2Fxtext-extras+repo%3Aeclipse%2Fxtext-eclipse+repo%3Aeclipse%2Fxtext-idea+repo%3Aeclipse%2Fxtext-web+repo%3Aeclipse%2Fxtext-maven+repo%3Aeclipse%2Fxtext-xtend&type=Issues&ref=searchresults)

- [Closed Pull Requests](https://github.com/search?utf8=%E2%9C%93&q=is%3Apr+milestone%3ARelease_2.16+is%3Aclosed+repo%3Aeclipse%2Fxtext+repo%3Aeclipse%2Fxtext-core+repo%3Aeclipse%2Fxtext-lib+repo%3Aeclipse%2Fxtext-extras+repo%3Aeclipse%2Fxtext-eclipse+repo%3Aeclipse%2Fxtext-idea+repo%3Aeclipse%2Fxtext-web+repo%3Aeclipse%2Fxtext-maven+repo%3Aeclipse%2Fxtext-xtend&type=Issues&ref=searchresults)

- [Fixed Eclipse Bugzilla tickets](https://bugs.eclipse.org/bugs/buglist.cgi?bug_status=RESOLVED&bug_status=VERIFIED&bug_status=CLOSED&classification=Modeling&classification=Tools&columnlist=product%2Ccomponent%2Cassigned_to%2Cbug_status%2Cresolution%2Cshort_desc%2Cchangeddate%2Ckeywords&f0=OP&f1=OP&f3=CP&f4=CP&known_name=Xtext%202.16&list_id=16618269&product=TMF&product=Xtend&query_based_on=Xtext%202.16&query_format=advanced&status_whiteboard=v2.16&status_whiteboard_type=allwordssubstr)

